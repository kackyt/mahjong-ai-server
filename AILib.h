/****************************************************************************************
 * Copyright (c) 2010, Takaya Kakizaki(kacky)
 * All rights reserved.

  ï¿½\ï¿½[ï¿½Xï¿½Rï¿½[ï¿½hï¿½`ï¿½ï¿½ï¿½ï¿½ï¿½oï¿½Cï¿½iï¿½ï¿½ï¿½`ï¿½ï¿½ï¿½ï¿½ï¿½Aï¿½ÏXï¿½ï¿½ï¿½é‚©ï¿½ï¿½ï¿½È‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½í‚¸ï¿½Aï¿½È‰ï¿½ï¿½Ìï¿½ï¿½ï¿½ï¿½ğ–‚ï¿½ï¿½ï¿½ï¿½ê‡ï¿½ÉŒï¿½ï¿½ï¿½Aï¿½Ä”Ğ•zï¿½ï¿½ï¿½ï¿½Ñgï¿½pï¿½ï¿½ï¿½ï¿½ï¿½Â‚ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½B

  ï¿½Eï¿½\ï¿½[ï¿½Xï¿½Rï¿½[ï¿½hï¿½ï¿½ï¿½Ä”Ğ•zï¿½ï¿½ï¿½ï¿½ê‡ï¿½Aï¿½ï¿½Lï¿½Ì’ï¿½ï¿½ìŒ ï¿½\ï¿½ï¿½ï¿½Aï¿½{ï¿½ï¿½ï¿½ï¿½ï¿½ê——ï¿½Aï¿½ï¿½ï¿½ï¿½Ñ‰ï¿½ï¿½Lï¿½ÆÓï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü‚ß‚é‚±ï¿½ÆB

  ï¿½Eï¿½oï¿½Cï¿½iï¿½ï¿½ï¿½`ï¿½ï¿½ï¿½ÅÄ”Ğ•zï¿½ï¿½ï¿½ï¿½ê‡ï¿½Aï¿½Ğ•zï¿½ï¿½ï¿½É•tï¿½ï¿½ï¿½Ìƒhï¿½Lï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½gï¿½ï¿½ï¿½Ìï¿½ï¿½ï¿½ï¿½ÉAï¿½ï¿½Lï¿½Ì’ï¿½ï¿½ìŒ ï¿½\ï¿½ï¿½ï¿½Aï¿½{ï¿½ï¿½ï¿½ï¿½ï¿½ê——ï¿½Aï¿½ï¿½ï¿½ï¿½Ñ‰ï¿½ï¿½Lï¿½ÆÓï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ü‚ß‚é‚±ï¿½ÆB

  ï¿½Eï¿½ï¿½ï¿½Ê‚É‚ï¿½ï¿½ï¿½ï¿½Ê‚Ì‹ï¿½ï¿½Â‚È‚ï¿½ï¿½ÉAï¿½{ï¿½\ï¿½tï¿½gï¿½Eï¿½Fï¿½Aï¿½ï¿½ï¿½ï¿½hï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½iï¿½Ìï¿½`ï¿½Ü‚ï¿½ï¿½Í”Ì”ï¿½ï¿½ï¿½ï¿½iï¿½ÉAï¿½Iï¿½[ï¿½vï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ì–ï¿½ï¿½Oï¿½Ü‚ï¿½ï¿½ÍƒRï¿½ï¿½ï¿½gï¿½ï¿½ï¿½rï¿½ï¿½ï¿½[ï¿½^ï¿½[ï¿½Ì–ï¿½ï¿½Oï¿½ï¿½ï¿½gï¿½pï¿½ï¿½ï¿½Ä‚Í‚È‚ï¿½È‚ï¿½ï¿½B


  ï¿½{ï¿½\ï¿½tï¿½gï¿½Eï¿½Fï¿½Aï¿½ÍAï¿½ï¿½ï¿½ìŒ ï¿½Ò‚ï¿½ï¿½ï¿½ÑƒRï¿½ï¿½ï¿½gï¿½ï¿½ï¿½rï¿½ï¿½ï¿½[ï¿½^ï¿½[ï¿½É‚ï¿½ï¿½ï¿½Äuï¿½ï¿½ï¿½ï¿½Ì‚Ü‚Üvï¿½ñ‹Ÿ‚ï¿½ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½Aï¿½ï¿½ï¿½ï¿½ï¿½Ùï¿½ï¿½ï¿½ï¿½í‚¸ï¿½A
  ï¿½ï¿½ï¿½Æ“Iï¿½Ègï¿½pï¿½Â”\ï¿½ï¿½ï¿½Aï¿½ï¿½ï¿½ï¿½Ñ“ï¿½ï¿½ï¿½Ì–Ú“Iï¿½É‘Î‚ï¿½ï¿½ï¿½Kï¿½ï¿½ï¿½ï¿½ï¿½ÉŠÖ‚ï¿½ï¿½ï¿½Ã–Ù‚Ì•ÛØ‚ï¿½ï¿½Ü‚ßAï¿½Ü‚ï¿½ï¿½ï¿½ï¿½ï¿½ÉŒï¿½ï¿½è‚³ï¿½ï¿½È‚ï¿½ï¿½Aï¿½ï¿½ï¿½ï¿½ï¿½È‚ï¿½ÛØ‚ï¿½ï¿½ï¿½ï¿½ï¿½Ü‚ï¿½ï¿½ï¿½B
  ï¿½ï¿½ï¿½ìŒ ï¿½Ò‚ï¿½ï¿½Rï¿½ï¿½ï¿½gï¿½ï¿½ï¿½rï¿½ï¿½ï¿½[ï¿½^ï¿½[ï¿½ï¿½ï¿½Aï¿½ï¿½ï¿½Rï¿½Ì‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½í‚¸ï¿½A ï¿½ï¿½ï¿½Qï¿½ï¿½ï¿½ï¿½ï¿½ÌŒï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½í‚¸ï¿½Aï¿½ï¿½ï¿½ÂÓ”Cï¿½Ìï¿½ï¿½ï¿½ï¿½ï¿½ï¿½_ï¿½ï¿½Å‚ï¿½ï¿½é‚©ï¿½ï¿½ï¿½iï¿½Ó”Cï¿½Å‚ï¿½ï¿½é‚©
  ï¿½iï¿½ßï¿½ï¿½ï¿½ï¿½Ì‘ï¿½ï¿½Ìjï¿½sï¿½@ï¿½sï¿½×‚Å‚ï¿½ï¿½é‚©ï¿½ï¿½ï¿½í‚¸ï¿½Aï¿½ï¿½ï¿½É‚ï¿½ï¿½Ì‚æ‚¤ï¿½È‘ï¿½ï¿½Qï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Â”\ï¿½ï¿½ï¿½ï¿½mï¿½ç‚³ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½Æ‚ï¿½ï¿½Ä‚ï¿½ï¿½Aï¿½{ï¿½\ï¿½tï¿½gï¿½Eï¿½Fï¿½Aï¿½Ìgï¿½pï¿½É‚ï¿½ï¿½ï¿½Ä”ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
  ï¿½iï¿½ï¿½Ö•iï¿½Ü‚ï¿½ï¿½Í‘ï¿½pï¿½Tï¿½[ï¿½rï¿½Xï¿½Ì’ï¿½ï¿½Bï¿½Aï¿½gï¿½pï¿½Ì‘rï¿½ï¿½ï¿½Aï¿½fï¿½[ï¿½^ï¿½Ì‘rï¿½ï¿½ï¿½Aï¿½ï¿½ï¿½vï¿½Ì‘rï¿½ï¿½ï¿½Aï¿½Æ–ï¿½ï¿½Ì’ï¿½ï¿½fï¿½ï¿½ï¿½Ü‚ßAï¿½Ü‚ï¿½ï¿½ï¿½ï¿½ï¿½ÉŒï¿½ï¿½è‚³ï¿½ï¿½È‚ï¿½ï¿½j
  ï¿½ï¿½ï¿½Ú‘ï¿½ï¿½Qï¿½Aï¿½ÔÚ‘ï¿½ï¿½Qï¿½Aï¿½ï¿½ï¿½ï¿½ï¿½Iï¿½È‘ï¿½ï¿½Qï¿½Aï¿½ï¿½ï¿½Ê‘ï¿½ï¿½Qï¿½Aï¿½ï¿½ï¿½ï¿½ï¿½Iï¿½ï¿½ï¿½Qï¿½Aï¿½Ü‚ï¿½ï¿½ÍŒï¿½ï¿½Ê‘ï¿½ï¿½Qï¿½É‚Â‚ï¿½ï¿½ÄAï¿½ï¿½ØÓ”Cï¿½ğ•‰‚ï¿½È‚ï¿½ï¿½ï¿½ï¿½Ì‚Æ‚ï¿½ï¿½Ü‚ï¿½ï¿½B

****************************************************************************************/
#pragma once

#ifdef __cplusplus
extern "C"
{
#endif

#define AI_TEHAI_LIMIT (14)
#define AI_FLAG_NONE (0)
#define AI_FLAG_MACHI (8)          // ï¿½Ò‚ï¿½ï¿½v
#define AI_FLAG_EFFECT_SYUNTSU (7) // ï¿½Lï¿½ï¿½ï¿½v
#define AI_FLAG_EFFECT_KOUTSU (6)  // ï¿½Lï¿½ï¿½ï¿½v
#define AI_FLAG_EFFECT_KANTSU (5)  // ï¿½Lï¿½ï¿½ï¿½v
#define AI_FLAG_EFFECT_RYANTAH (4) // ï¿½Lï¿½ï¿½ï¿½v
#define AI_FLAG_EFFECT_ATAMA (3)   // ï¿½Lï¿½ï¿½ï¿½v
#define AI_FLAG_EFFECT_KANTAH (2)  // ï¿½Lï¿½ï¿½ï¿½v
#define AI_FLAG_EFFECT_PENTAH (1)  // ï¿½Lï¿½ï¿½ï¿½v

    typedef struct
    {
        int tehai[14];
        int tehai_max;
    } AGARI_LIST;

    typedef struct
    {
        int mentsuflag[14];
        int machi[34];
        int shanten;
    } TENPAI_LIST;

    typedef struct
    {
        int pai;
        int count;
        int startpos;
    } PAICOUNT;

    typedef struct
    {
        int category;
        int pailist[3];
    } t_mentsu;

    typedef struct
    {
        t_mentsu mentsulist[7];
        int mentsusize;
        int han;
        int fu;
        int score;
        int oyascore;
        int coscore;
        int machipos;
        int machi;
        int machihai;
        int menzen;
    } RESULT_ITEM;

    typedef struct
    {
        t_mentsu nakilist[4];
        int dorapai[8];
        int dorasize;
        int naki;
        int count;
        int tsumo;
        int oya;
        int riichi;
        int bakaze;
        int zikaze;
        int endpai;
        int kan;
        int riichicount;
        int membernaki;
    } GAMESTATE;

#define AI_UKIHAI (0)
#define AI_KOUTSU (1)
#define AI_SYUNTSU (2)
#define AI_SYUNTSU_START (2)
#define AI_SYUNTSU_MIDDLE (3)
#define AI_SYUNTSU_END (4)
#define AI_KANTSU (5)
#define AI_ATAMA (6)
#define AI_TOITSU (7)
#define AI_ANKAN (8)
#define AI_MINKAN (9)
#define AI_MENTSU_LIMIT (10)

#define AI_NIL_PAI (63)

#define AI_MACHI_RYANMEN (0)
#define AI_MACHI_PENCHAN (1)
#define AI_MACHI_KANCHAN (2)
#define AI_MACHI_SHANPON (3)
#define AI_MACHI_TANKI (4)

#define AI_TRUE (1)
#define AI_FALSE (0)

    extern int search_agari(int *paiarray, int paiSize, AGARI_LIST *pList, int actualPaiSize, void *inf, int (*getPoint)(AGARI_LIST *, void *));
    extern int search_tenpai(int *paiarray, int paiSize, int *pMachi, TENPAI_LIST *pList, int listSize, int maxshanten);
    extern int search_score(int *paiarray, int paiSize, void *inf, int (*callback)(int *paiarray, int *mentsu, int length, int machi, void *inf));
    extern void make_resultitem(int *paiarray, int *mentsu, int length, RESULT_ITEM *item, GAMESTATE *gamestate, int agarihai, int machi);
    extern void make_resultitem_bh(RESULT_ITEM *item, GAMESTATE *gamestate);
    extern void tehai_diff_fromcount(const unsigned *tecount_now, unsigned *tecount_future, int n);
    extern void tehai_diff(const unsigned *tehai_now, const unsigned *tehai_future, unsigned *result);
    extern int paidistance(const unsigned *tehai, unsigned pai);

    extern double probabilityFunction(double, int);
    extern int permutation(int m, int n);
    extern int factorial(int n);
    extern int combination(int m, int n);

#ifdef __cplusplus
}
#endif